/*
 * Note: this file originally auto-generated by mib2c using
 *        : mib2c.old-api.conf,v 1.3 2002/10/17 09:40:46 dts12 Exp $
 */

#include <net-snmp/net-snmp-config.h>
#include <net-snmp/net-snmp-includes.h>
#include <net-snmp/agent/net-snmp-agent-includes.h>
#include "Swap.h"

#define STAT_FILE "/proc/stat"

/* 
 * Swap_variables_oid:
 *   this is the top level oid that we want to register under.  This
 *   is essentially a prefix, with the suffix appearing in the
 *   variable below.
 */

oid Swap_variables_oid[] = { 1,3,6,1,4,1,3204,1,3,26 };

/* 
 * variable4 Swap_variables:
 *   this variable defines function callbacks and type return information 
 *   for the  mib section 
 */

struct variable4 Swap_variables[] = {
/*  magic number        , variable type , ro/rw , callback fn  , L, oidsuffix */
#define SWAPNUMBYTEIN		1
{SWAPNUMBYTEIN,  ASN_INTEGER,  RONLY ,  var_Swap, 1,  { 5 }},
#define SWAPCHARSTRANSFERBYWRITE		2
{SWAPCHARSTRANSFERBYWRITE,  ASN_COUNTER,  RONLY ,  var_Swap, 1,  { 1 }},
#define SWAPNUMPROCESSINS		3
{SWAPNUMPROCESSINS,  ASN_COUNTER,  RONLY ,  var_Swap, 1,  { 3 }},
#define SWAPPROCESSCONTEXTSWITCH		4
{SWAPPROCESSCONTEXTSWITCH,  ASN_COUNTER,  RONLY ,  var_Swap, 1,  { 2 }},
#define SWAPNUMPROCESSOUTS		5
{SWAPNUMPROCESSOUTS,  ASN_COUNTER,  RONLY ,  var_Swap, 1,  { 4 }},
#define SWAPNUMBYTEOUT		6
{SWAPNUMBYTEOUT,  ASN_INTEGER,  RONLY ,  var_Swap, 1,  { 6 }},

};
/*    (L = length of the oidsuffix) */



/** Initializes the Swap module */
void
init_Swap(void)
{

    DEBUGMSGTL(("Swap", "Initializing\n"));

    /* register ourselves with the agent to handle our mib tree */
    REGISTER_MIB("Swap", Swap_variables, variable4,
               Swap_variables_oid);

    /* place any other initialization junk you need here */
}

/*
 * var_Swap():
 *   This function is called every time the agent gets a request for
 *   a scalar variable that might be found within your mib section
 *   registered above.  It is up to you to do the right thing and
 *   return the correct value.
 *     You should also correct the value of "var_len" if necessary.
 *
 *   Please see the documentation for more information about writing
 *   module extensions, and check out the examples in the examples
 *   and mibII directories.
 */
unsigned char *
var_Swap(struct variable *vp, 
                oid     *name, 
                size_t  *length, 
                int     exact, 
                size_t  *var_len, 
                WriteMethod **write_method)
{
    /* variables we may use later */
    static long long_ret;
    static u_long ulong_ret;
    static unsigned char string[SPRINT_MAX_LEN];
    static oid objid[MAX_OID_LEN];
    static struct counter64 c64;
    static unsigned long ulCtxt;
	
    if (header_generic(vp,name,length,exact,var_len,write_method)
                                  == MATCH_FAILED )
    return NULL;

    /* 
   * this is where we do the value assignments for the mib results.
   */
    switch(vp->magic) {
#if 0
    case SWAPNUMBYTEIN:
        VAR = VALUE;	/* XXX */
        return (u_char*) &VAR;
    case SWAPCHARSTRANSFERBYWRITE:
        VAR = VALUE;	/* XXX */
        return (u_char*) &VAR;
    case SWAPNUMPROCESSINS:
        VAR = VALUE;	/* XXX */
        return (u_char*) &VAR;
#endif    
    case SWAPPROCESSCONTEXTSWITCH:
	return (u_char*) &ulCtxt;
#if 0    
    case SWAPNUMPROCESSOUTS:
        VAR = VALUE;	/* XXX */
        return (u_char*) &VAR;
    case SWAPNUMBYTEOUT:
        VAR = VALUE;	/* XXX */
        return (u_char*) &VAR;
#endif
	default:
      ERROR_MSG("");
    }
    return NULL;
}